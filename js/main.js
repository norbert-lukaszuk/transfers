!function(n){var c={};function t(e){if(c[e])return c[e].exports;var l=c[e]={i:e,l:!1,exports:{}};return n[e].call(l.exports,l,l.exports,t),l.l=!0,l.exports}t.m=n,t.c=c,t.d=function(n,c,e){t.o(n,c)||Object.defineProperty(n,c,{enumerable:!0,get:e})},t.r=function(n){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},t.t=function(n,c){if(1&c&&(n=t(n)),8&c)return n;if(4&c&&"object"==typeof n&&n&&n.__esModule)return n;var e=Object.create(null);if(t.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:n}),2&c&&"string"!=typeof n)for(var l in n)t.d(e,l,function(c){return n[c]}.bind(null,l));return e},t.n=function(n){var c=n&&n.__esModule?function(){return n.default}:function(){return n};return t.d(c,"a",c),c},t.o=function(n,c){return Object.prototype.hasOwnProperty.call(n,c)},t.p="",t(t.s=0)}([function(module,__webpack_exports__,__webpack_require__){"use strict";eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var os__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(1);\n/* harmony import */ var os__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(os__WEBPACK_IMPORTED_MODULE_0__);\n\r\n\r\n\r\n// import { doc } from \"prettier\";\r\n\r\n// service worker registration - remove if you're not going to use it\r\n\r\nif ('serviceWorker' in navigator) {\r\n  window.addEventListener('load', function () {\r\n    navigator.serviceWorker.register('serviceworker.js').then(function (registration) {\r\n      // Registration was successful\r\n      console.log('ServiceWorker registration successful with scope: ', registration.scope);\r\n    }, function (err) {\r\n      // registration failed :(\r\n        console.log('ServiceWorker registration failed: ', err);\r\n      });\r\n    });\r\n  }\r\n  const add__transfer = document.getElementById(\"add__transfer\");\r\n  const addButon = document.getElementById(\"addButton\");\r\n  const backArrow = document.getElementById(\"backArrow\");\r\n  const calendarBackArrow = document.getElementById(\"calendarBackArrow\");\r\n  const calendarButton = document.getElementById(\"calendarButton\");\r\n  const calendarPopup = document.querySelector(\".calendar__popup\");\r\n  const calendarWraper = document.querySelector(\".calendar__wraper\");\r\n  const form__user = document.getElementById(\"form__user\");\r\n  const logged__out = document.querySelector('.logged__out');\r\n  const monthName__navigation = document.getElementById(\"monthNav\");\r\n  const show__done = document.getElementById(\"show__done\");\r\n  const transfers__submit = document.getElementById(\"transfers__submit\");\r\n  const ul = document.getElementById(\"list__transfers\");\r\n  const user__panel = document.querySelector(\".user__panel\");\r\n  const user__logout = document.getElementById(\"user__logout\");\r\nconst user__button = document.getElementById(\"userButton\");\r\nconst navigation = document.querySelector(\".navigation\");\r\nconst popup = document.querySelector(\".popup\");\r\nconst date = document.getElementById(\"calendar\");\r\nconst today = document.getElementById(\"calendar\");\r\nlet bank__clicked = null;\r\nconst category = document.getElementById(\"category\");\r\nconst title = document.getElementById(\"title\");\r\nconst amount = document.getElementById(\"amount\");\r\nconst calendarBackArow = document.querySelector(\".calendar__backArow\");\r\nconst newDate = new Date(date);\r\nconst transfers = document.querySelector(\".transfer\");\r\n\r\nlet input = document.querySelector(\".input\");\r\nconst bankSelectWraper = document.querySelector(\".bankSelectWraper\");\r\nconst mbankIcon = document.getElementById(\"mbankIcon\");\r\nconst pkoIcon = document.getElementById(\"pkoIcon\");\r\n// Get transfer info from form\r\nconst Transfer = (amount, bank, category, date, status, title) =>{\r\n    const transfer ={\r\n      amount: amount,\r\n      bank: bank,\r\n      category: category,\r\n      date: date,\r\n      status: status,\r\n      title: title,\r\n      \r\n    }\r\n    return transfer\r\n  }\r\n\r\n\r\nconst daysLeft = (date) => {//funkcja zwraca liczbe dni miedzy datą a dziś\r\n  return Math.ceil((new Date(date) - new Date()) / 1000 / 60 / 60 / 24);\r\n}\r\n\r\nconst statusCircle = (timeLeft) => {//kolor kółka zależnie od ilości pozostałych dni\r\n  if (timeLeft >= 3) {\r\n    return 'statusCircle--green'\r\n  }\r\n  else if (timeLeft == 2) {\r\n    return 'statusCircle--yellow'\r\n  }\r\n  else if (timeLeft <= 1) {\r\n    return 'statusCircle--crimson'\r\n  }\r\n}\r\n\r\nconst daysInMonth = (month) => {\r\n  return new Date(2020, month + 1, 0).getDate()\r\n}\r\nconst monthName = (month) =>{\r\n  switch (month) {\r\n    case 0:\r\n      return 'January';\r\n      break;\r\n    \r\n    case 1:\r\n      return 'February';\r\n      break;\r\n    case 2:\r\n      return 'March';\r\n      break;\r\n    case 3:\r\n      return 'April';\r\n      break;\r\n    case 4:\r\n      return 'May';\r\n      break;\r\n    case 5:\r\n      return 'June';\r\n      break;\r\n    case 6:\r\n      return 'July';\r\n      break;\r\n    case 7:\r\n      return 'August';\r\n      break;\r\n    case 8:\r\n      return 'September';\r\n      break;\r\n    case 9:\r\n      return 'October';\r\n      break;\r\n    case 10:\r\n      return 'November';\r\n      break;\r\n    case 11:\r\n      return 'December';\r\n      break;\r\n    \r\n  }\r\n}\r\n\r\nconst dayOfWeekConvert = (day)=>{\r\n  if(day=== 0){\r\n    day=6;\r\n    return day;\r\n  }\r\n  else{return day-1}\r\n}\r\n\r\nconst addTransfer = (amount, bank, category, date, status, title)=>{\r\n  const dayDifference = dateFns.differenceInDays(new Date(date), new Date());\r\n\r\n  if (status === \"done\") {\r\n    const html = `\r\n    <div class=\"strip__done\">${date.toISOString().slice(0,10)}</div>\r\n    <div class=\"logoWraper\">\r\n      <div class=\"category\">${category}</div>\r\n    </div>\r\n    <div class=\"timeLeft timeLeftDone\"></div> \r\n    <div class=\"container__bar container__bar--hide\">\r\n        <div class=\"amount\">${amount} zł</div> \r\n        <p class=\"title\">${title}</p>\r\n            <div class=\"containerBar__icons containerBar__icons--done\">\r\n            <i class=\"icon__delete far fa-trash-alt\"></i>\r\n            </div>\r\n        </div>\r\n    <i class=\"arrow fas fa-chevron-down\"></i>\r\n  </div>`;\r\n    return html;\r\n  } else {\r\n    const html = `\r\n    <div class=\"strip__${bank}\">${date.toISOString().slice(0,10)}</div>\r\n    <div class=\"logoWraper\">\r\n      <img class=\"image\" src=\"assets/img/${bank} 30x30.png\">\r\n      <div class=\"category\">${category}</div>\r\n      <div class=\"statusCircle ${statusCircle(dayDifference)}\"></div>\r\n    </div>\r\n    <div class=\"timeLeft\">${dateFns.differenceInDays(\r\n      new Date(date),\r\n      new Date()\r\n    )} d.</div> \r\n    <div class=\"container__bar container__bar--hide\">\r\n        <div class=\"amount\">${amount} zł</div> \r\n        <p class=\"title\">${title}</p>\r\n            <div class=\"containerBar__icons\">\r\n            <i class=\"icon__checked far fa-check-square\"></i>\r\n            <i class=\"icon__edit far fa-edit\"></i>\r\n            <i class=\"icon__delete far fa-trash-alt\"></i>\r\n            </div>\r\n        </div>\r\n    <i class=\"arrow fas fa-chevron-down\"></i>\r\n    </div>`;\r\n    return html;\r\n  }\r\n  \r\n}\r\nconst calendarReset = ()=>{\r\n  const calendar = calendarWraper.querySelectorAll('.day:not(.day--empty)');\r\n  \r\n  calendar.forEach(e=>{\r\n    e.innerHTML = null;\r\n    e.classList.add('day--empty');\r\n  })\r\n}\r\nconst deleteTransfer = (id)=>{\r\n\r\n  const containers =  document.querySelectorAll('.container');\r\n  containers.forEach(e=>{ \r\n    if(e.getAttribute('data-id') === id){\r\n      db.collection('bankTransfers').doc(id).delete()\r\n      .then(console.log('transfer deleted from firebase'))\r\n      .catch(err => console.log(err))\r\n    }\r\n\r\n})\r\n\r\n}\r\n\r\nconst printCalendar = (today) =>{\r\n\r\n  const list = document.querySelectorAll('.container:not(.container__done)');\r\n  const firstDayOfMonth = dayOfWeekConvert(dateFns.startOfMonth(today).getDay());\r\n  const month = monthName(today.getMonth());\r\n  let monthNumber = (today.getMonth()+1).toString();\r\n  let year = today.getFullYear().toString();\r\n  const monthHeader = document.querySelector('.monthName__header');\r\n  const yearHeader = document.getElementById('year__header');\r\n  monthHeader.innerText = month;\r\n  yearHeader.innerText = year;\r\n  const daysInMonth = dateFns.getDaysInMonth(today);\r\n  const lastDayInArray = daysInMonth + firstDayOfMonth-1;\r\n  const daysInCalendar = calendarWraper.querySelectorAll('.day');\r\n  let dayInArray = new Date(`${year}-${monthNumber}-1`);\r\n\r\n  for(let i = firstDayOfMonth; i<=lastDayInArray; i++){\r\n\r\n    daysInCalendar[i].classList.remove('day--empty');\r\n    daysInCalendar[i].innerHTML = `<p class=\"dayInMonth\">${dayInArray.getDate()} ${dayInArray.toString().slice(0,3)}</p>`\r\n    dayInArray = dateFns.addDays(dayInArray,1);\r\n  }\r\n\r\n  list.forEach(e=>{\r\n    \r\n    const category = e.children.item(1).children.item(1).innerText;\r\n    const transferDay = dateFns.getDate(new Date(e.children.item(0).innerText));\r\n    const transferMonth = dateFns.getMonth(new Date(e.children.item(0).innerText))+1;\r\n    \r\n    if(transferMonth === +monthNumber){\r\n      const calendarInPosition = (transferDay+firstDayOfMonth)-1;\r\n      daysInCalendar[calendarInPosition].innerHTML += `<p class=\"day__category\">${category}</p>`\r\n      \r\n    }\r\n  })\r\n\r\n}\r\n//watch for login or logout \r\nauth.onAuthStateChanged(user=>{\r\n//when user is logged in\r\n  if (user){\r\n    logged__out.style.display='none';\r\n    const info = document.createElement('p');\r\n    info.setAttribute('class','login__info')\r\n    info.innerText = `Your login as: ${user.email}`\r\n    user__panel.prepend(info);\r\n    form__user.user__email.style.display='none';\r\n    form__user.user__password.style.display='none';\r\n    form__user.user__login.style.display='none';\r\n    form__user.user__logout.style.display='block';\r\n    user__button.style.color = 'green';\r\n//real-time adding items to list\r\n    db.collection('bankTransfers').orderBy(\"date\").onSnapshot(snapshot=>{\r\n      snapshot.docChanges().forEach(e=>{\r\n        const doc = e.doc;\r\n        console.log('doc.id', doc.id);    \r\n          if(e.type === 'added'){\r\n            let data = doc.data();\r\n            let fbDate = data.date;\r\n            data.date = fbDate.toDate();\r\n            data.dataId = doc.id;\r\n            \r\n              const li = document.createElement('li');\r\n              li.setAttribute('data-id', doc.id);\r\n              li.setAttribute('transDate-id', new Date(data.date));\r\n              li.setAttribute('class', 'container');\r\n              const dayDifference = dateFns.differenceInDays(new Date(data.date), new Date());\r\n              const {amount, bank, category, date, status, title} = data;\r\n          if(status === 'done'){\r\n            li.classList.add('container__done', 'container__done--hide')\r\n          }\r\n        li.innerHTML = addTransfer(amount, bank, category, date, status, title);\r\n        ul.append(li);\r\n        \r\n        \r\n        \r\n        }\r\n        if(e.type === 'modified'){\r\n        const li = document.createElement('li');\r\n        li.setAttribute('data-id', doc.id);\r\n        li.setAttribute('class', 'container');\r\n        li.classList.add('container__done');\r\n        const data = doc.data();\r\n        const dayDifference = dateFns.differenceInDays(new Date(data.date), new Date());\r\n        const {amount, bank, category, date, status, title} = data;\r\n        \r\n        li.innerHTML = addTransfer(amount, bank, category, date, status, title); \r\n        ul.append(li);\r\n        \r\n        }\r\n        \r\n        \r\n      })\r\n      // getting transfers list sort and display again\r\n      let list = ul.querySelectorAll('.container');\r\n        let arr = [...list];\r\n        ul.innerHTML = null;\r\n        arr.sort((a,b)=>{\r\n          a = new Date(a.getAttribute('transdate-id'));\r\n          b = new Date(b.getAttribute('transdate-id'));  \r\n          return a-b;\r\n          })\r\n        arr.forEach(e=>ul.append(e))\r\n        console.log(\"arr\", arr);\r\n      console.log('onsnapshot');\r\n    })\r\n    \r\n    \r\n  }\r\n  // when user is not logged in\r\n  else{\r\n    const info = user__panel.querySelector('.login__info');\r\n    if(info){info.remove()};\r\n    form__user.user__email.style.display='block';\r\n    form__user.user__password.style.display='block';\r\n    form__user.user__login.style.display='inline';\r\n    form__user.user__logout.style.display='none';\r\n    console.log('user logged out');\r\n    user__button.style.color = 'black';\r\n    logged__out.style.display='block';\r\n  }\r\n})\r\n\r\n//log user in \r\nform__user.addEventListener('submit',e=>{\r\n  e.preventDefault();\r\n  const email = form__user.user__email.value;\r\n  const password = form__user.user__password.value;\r\n  \r\n  auth.signInWithEmailAndPassword(email, password)\r\n  .then(form__user.reset())\r\n  \r\n  user__panel.classList.toggle('user__panel--show');\r\n  \r\n})\r\n//log out user\r\nuser__logout.addEventListener('click', e=>{\r\n  e.preventDefault();\r\n  user__panel.classList.toggle('user__panel--show')\r\n  auth.signOut();\r\n  const containers = ul.querySelectorAll('.container');\r\n  containers.forEach(e=>{\r\n    e.remove();\r\n  })\r\n  \r\n})\r\n // show hide user panel\r\nuser__button.addEventListener('click', e=>{\r\n    user__panel.classList.toggle('user__panel--show');\r\n})\r\n//get data from firebase\r\n// db.collection('bankTransfers').orderBy(\"date\").get()\r\n// .then(snapshot=>{\r\n//   snapshot.docs.forEach(e=>{\r\n//     const data = e.data();\r\n//     console.log(data.date.toDate());\r\n//     console.log(e.data());\r\n//   })\r\n// })\r\n\r\n\r\n\r\nbackArrow.addEventListener('click', e=>{\r\n  add__transfer.classList.remove('add__transfer--show')\r\n})\r\n\r\nul.addEventListener(\"click\", e => {\r\n  if (e.target.tagName === \"I\" && e.target.classList.contains(\"arrow\")) {\r\n    e.target.parentElement.children\r\n      .item(3)\r\n      .classList.toggle(\"container__bar--hide\");\r\n    e.target.parentElement.children.item(4).classList.toggle(\"fa-rotate-180\");\r\n  }\r\n  if (e.target.tagName === \"I\" && e.target.classList.contains(\"icon__delete\")) {\r\n    let id = e.target.parentElement.parentElement.parentElement.getAttribute(\r\n      \"data-id\"\r\n    );\r\n    const containers = document.querySelectorAll(\".container\");\r\n    containers.forEach(e => {\r\n      if (e.getAttribute(\"data-id\") === id) {\r\n        db.collection(\"bankTransfers\")\r\n          .doc(id)\r\n          .delete()\r\n          .then(console.log(\"transfer deleted from firebase\"))\r\n          .catch(err => console.log(err));\r\n        e.remove();\r\n      }\r\n    });\r\n  }\r\n  if(e.target.tagName === \"I\" && e.target.classList.contains('icon__checked')){\r\n    console.log(e.target.parentElement.parentElement.parentElement);\r\n    const id = e.target.parentElement.parentElement.parentElement.getAttribute('data-id')\r\n    console.log(\"TCL: e.target.parentElement.parentElement.parentElement\", e.target.parentElement.parentElement.parentElement)\r\n    console.log(id);\r\n    db.collection('bankTransfers').doc(id).update({status: 'done'})\r\n    .then(console.log(\"transfer edited in firebase\"))\r\n    .catch(err => console.log(err));\r\n    e.target.parentElement.parentElement.parentElement.remove();\r\n  }\r\n});\r\n\r\naddButon.addEventListener('click', e=>{\r\n  add__transfer.classList.toggle('add__transfer--show');\r\n  // putting curent date in date input\r\n  const datePicker = document.getElementById('calendar');\r\n  datePicker.valueAsDate = new Date();\r\n})\r\n// Calendar view open\r\ncalendarButton.addEventListener('click', e=> {\r\n  calendarPopup.classList.toggle('calendar__popup--show');\r\n  let today = new Date();\r\n  printCalendar(today);\r\n// marking today day\r\nconst days = calendarWraper.querySelectorAll('.day');\r\n  days.forEach(e=>{\r\n    const day = e.innerText.slice(0,2);\r\n    if(+day === today.getDate()){\r\n      console.log(+day);\r\n      e.style.border = 'green solid 2px';\r\n    }\r\n    // console.log(+day)\r\n    })\r\n//  month arrow listener\r\n  monthName__navigation.addEventListener('click', e=>{\r\n    if(e.target.getAttribute('id') === 'nextMonth'){\r\n      today = dateFns.addMonths(today, 1);\r\n      calendarReset();\r\n      printCalendar(today);\r\n    }\r\n    if(e.target.getAttribute('id') === 'prevMonth'){\r\n      today = dateFns.subMonths(today, 1);\r\n      calendarReset();\r\n      printCalendar(today);\r\n    }\r\n})\r\n \r\n})\r\n\r\ncalendarBackArrow.addEventListener('click', e=>{\r\n  calendarPopup.classList.toggle('calendar__popup--show');\r\n  calendarReset();\r\n})\r\nshow__done.addEventListener('click', e=>{\r\n   const containers = ul.querySelectorAll('.container__done');\r\n   containers.forEach(e=>{\r\n     e.classList.toggle('container__done--hide')\r\n   })\r\n})\r\n// add new transfer to firebase\r\ntransfers__submit.addEventListener('click', e=>{\r\n  e.preventDefault();\r\n  const category = document.getElementById('category');\r\n  const bank =  document.querySelector('input[name=bank]:checked').value;\r\n  console.log(\"date from form\",transfers.date.valueAsDate);\r\n  const bankObject = Transfer(parseFloat(transfers.amount.value), bank, transfers.category.value, transfers.date.valueAsDate, '',transfers.title.value);\r\n    \r\n    db.collection('bankTransfers').add(bankObject).then(()=>{\r\n      console.log('transfer added to firebase')\r\n    })\r\n    transfers.reset();\r\n    add__transfer.classList.toggle('add__transfer--show');\r\n})\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvanMvbWFpbi5qcz85MjkxIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFBQTtBQUFhOztBQUVhO0FBQzFCLFdBQVcsTUFBTTs7QUFFakI7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsT0FBTztBQUNQLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7OztBQUdBLDRCQUE0QjtBQUM1QjtBQUNBOztBQUVBLG9DQUFvQztBQUNwQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsK0JBQStCLCtCQUErQjtBQUM5RDtBQUNBLDhCQUE4QixTQUFTO0FBQ3ZDO0FBQ0E7QUFDQTtBQUNBLDhCQUE4QixPQUFPO0FBQ3JDLDJCQUEyQixNQUFNO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0EseUJBQXlCLEtBQUssSUFBSSwrQkFBK0I7QUFDakU7QUFDQSwyQ0FBMkMsS0FBSztBQUNoRCw4QkFBOEIsU0FBUztBQUN2QyxpQ0FBaUMsNEJBQTRCO0FBQzdEO0FBQ0EsNEJBQTRCO0FBQzVCO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQSw4QkFBOEIsT0FBTztBQUNyQywyQkFBMkIsTUFBTTtBQUNqQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7O0FBRUE7QUFDQSx5QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsQ0FBQzs7QUFFRDs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQkFBK0IsS0FBSyxHQUFHLFlBQVk7O0FBRW5ELDhCQUE4QixtQkFBbUI7O0FBRWpEO0FBQ0EsMkRBQTJELHFCQUFxQixHQUFHLGlDQUFpQztBQUNwSDtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0Esa0ZBQWtGLFNBQVM7O0FBRTNGO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUNBQXVDLFdBQVc7QUFDbEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQiw0Q0FBNEM7QUFDakU7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7OztBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLDRDQUE0Qzs7QUFFM0QsZ0Y7QUFDQTs7QUFFQTs7O0FBR0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVEO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0EsS0FBSzs7O0FBR0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7O0FBRUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSCxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOLElBQUk7Ozs7QUFJSjtBQUNBO0FBQ0EsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbURBQW1ELGVBQWU7QUFDbEU7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDOztBQUVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDOztBQUVELENBQUM7O0FBRUQ7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxDQUFDIiwiZmlsZSI6IjAuanMiLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcclxuXHJcbmltcG9ydCB7IHR5cGUgfSBmcm9tIFwib3NcIjtcclxuLy8gaW1wb3J0IHsgZG9jIH0gZnJvbSBcInByZXR0aWVyXCI7XHJcblxyXG4vLyBzZXJ2aWNlIHdvcmtlciByZWdpc3RyYXRpb24gLSByZW1vdmUgaWYgeW91J3JlIG5vdCBnb2luZyB0byB1c2UgaXRcclxuXHJcbmlmICgnc2VydmljZVdvcmtlcicgaW4gbmF2aWdhdG9yKSB7XHJcbiAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWQnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICBuYXZpZ2F0b3Iuc2VydmljZVdvcmtlci5yZWdpc3Rlcignc2VydmljZXdvcmtlci5qcycpLnRoZW4oZnVuY3Rpb24gKHJlZ2lzdHJhdGlvbikge1xyXG4gICAgICAvLyBSZWdpc3RyYXRpb24gd2FzIHN1Y2Nlc3NmdWxcclxuICAgICAgY29uc29sZS5sb2coJ1NlcnZpY2VXb3JrZXIgcmVnaXN0cmF0aW9uIHN1Y2Nlc3NmdWwgd2l0aCBzY29wZTogJywgcmVnaXN0cmF0aW9uLnNjb3BlKTtcclxuICAgIH0sIGZ1bmN0aW9uIChlcnIpIHtcclxuICAgICAgLy8gcmVnaXN0cmF0aW9uIGZhaWxlZCA6KFxyXG4gICAgICAgIGNvbnNvbGUubG9nKCdTZXJ2aWNlV29ya2VyIHJlZ2lzdHJhdGlvbiBmYWlsZWQ6ICcsIGVycik7XHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgfVxyXG4gIGNvbnN0IGFkZF9fdHJhbnNmZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImFkZF9fdHJhbnNmZXJcIik7XHJcbiAgY29uc3QgYWRkQnV0b24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImFkZEJ1dHRvblwiKTtcclxuICBjb25zdCBiYWNrQXJyb3cgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImJhY2tBcnJvd1wiKTtcclxuICBjb25zdCBjYWxlbmRhckJhY2tBcnJvdyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiY2FsZW5kYXJCYWNrQXJyb3dcIik7XHJcbiAgY29uc3QgY2FsZW5kYXJCdXR0b24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImNhbGVuZGFyQnV0dG9uXCIpO1xyXG4gIGNvbnN0IGNhbGVuZGFyUG9wdXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhbGVuZGFyX19wb3B1cFwiKTtcclxuICBjb25zdCBjYWxlbmRhcldyYXBlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FsZW5kYXJfX3dyYXBlclwiKTtcclxuICBjb25zdCBmb3JtX191c2VyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJmb3JtX191c2VyXCIpO1xyXG4gIGNvbnN0IGxvZ2dlZF9fb3V0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmxvZ2dlZF9fb3V0Jyk7XHJcbiAgY29uc3QgbW9udGhOYW1lX19uYXZpZ2F0aW9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJtb250aE5hdlwiKTtcclxuICBjb25zdCBzaG93X19kb25lID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzaG93X19kb25lXCIpO1xyXG4gIGNvbnN0IHRyYW5zZmVyc19fc3VibWl0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ0cmFuc2ZlcnNfX3N1Ym1pdFwiKTtcclxuICBjb25zdCB1bCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibGlzdF9fdHJhbnNmZXJzXCIpO1xyXG4gIGNvbnN0IHVzZXJfX3BhbmVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi51c2VyX19wYW5lbFwiKTtcclxuICBjb25zdCB1c2VyX19sb2dvdXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInVzZXJfX2xvZ291dFwiKTtcclxuY29uc3QgdXNlcl9fYnV0dG9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ1c2VyQnV0dG9uXCIpO1xyXG5jb25zdCBuYXZpZ2F0aW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5uYXZpZ2F0aW9uXCIpO1xyXG5jb25zdCBwb3B1cCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBcIik7XHJcbmNvbnN0IGRhdGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImNhbGVuZGFyXCIpO1xyXG5jb25zdCB0b2RheSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiY2FsZW5kYXJcIik7XHJcbmxldCBiYW5rX19jbGlja2VkID0gbnVsbDtcclxuY29uc3QgY2F0ZWdvcnkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImNhdGVnb3J5XCIpO1xyXG5jb25zdCB0aXRsZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidGl0bGVcIik7XHJcbmNvbnN0IGFtb3VudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYW1vdW50XCIpO1xyXG5jb25zdCBjYWxlbmRhckJhY2tBcm93ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYWxlbmRhcl9fYmFja0Fyb3dcIik7XHJcbmNvbnN0IG5ld0RhdGUgPSBuZXcgRGF0ZShkYXRlKTtcclxuY29uc3QgdHJhbnNmZXJzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi50cmFuc2ZlclwiKTtcclxuXHJcbmxldCBpbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuaW5wdXRcIik7XHJcbmNvbnN0IGJhbmtTZWxlY3RXcmFwZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmJhbmtTZWxlY3RXcmFwZXJcIik7XHJcbmNvbnN0IG1iYW5rSWNvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibWJhbmtJY29uXCIpO1xyXG5jb25zdCBwa29JY29uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJwa29JY29uXCIpO1xyXG4vLyBHZXQgdHJhbnNmZXIgaW5mbyBmcm9tIGZvcm1cclxuY29uc3QgVHJhbnNmZXIgPSAoYW1vdW50LCBiYW5rLCBjYXRlZ29yeSwgZGF0ZSwgc3RhdHVzLCB0aXRsZSkgPT57XHJcbiAgICBjb25zdCB0cmFuc2ZlciA9e1xyXG4gICAgICBhbW91bnQ6IGFtb3VudCxcclxuICAgICAgYmFuazogYmFuayxcclxuICAgICAgY2F0ZWdvcnk6IGNhdGVnb3J5LFxyXG4gICAgICBkYXRlOiBkYXRlLFxyXG4gICAgICBzdGF0dXM6IHN0YXR1cyxcclxuICAgICAgdGl0bGU6IHRpdGxlLFxyXG4gICAgICBcclxuICAgIH1cclxuICAgIHJldHVybiB0cmFuc2ZlclxyXG4gIH1cclxuXHJcblxyXG5jb25zdCBkYXlzTGVmdCA9IChkYXRlKSA9PiB7Ly9mdW5rY2phIHp3cmFjYSBsaWN6YmUgZG5pIG1pZWR6eSBkYXTEhSBhIGR6acWbXHJcbiAgcmV0dXJuIE1hdGguY2VpbCgobmV3IERhdGUoZGF0ZSkgLSBuZXcgRGF0ZSgpKSAvIDEwMDAgLyA2MCAvIDYwIC8gMjQpO1xyXG59XHJcblxyXG5jb25zdCBzdGF0dXNDaXJjbGUgPSAodGltZUxlZnQpID0+IHsvL2tvbG9yIGvDs8WCa2EgemFsZcW8bmllIG9kIGlsb8WbY2kgcG96b3N0YcWCeWNoIGRuaVxyXG4gIGlmICh0aW1lTGVmdCA+PSAzKSB7XHJcbiAgICByZXR1cm4gJ3N0YXR1c0NpcmNsZS0tZ3JlZW4nXHJcbiAgfVxyXG4gIGVsc2UgaWYgKHRpbWVMZWZ0ID09IDIpIHtcclxuICAgIHJldHVybiAnc3RhdHVzQ2lyY2xlLS15ZWxsb3cnXHJcbiAgfVxyXG4gIGVsc2UgaWYgKHRpbWVMZWZ0IDw9IDEpIHtcclxuICAgIHJldHVybiAnc3RhdHVzQ2lyY2xlLS1jcmltc29uJ1xyXG4gIH1cclxufVxyXG5cclxuY29uc3QgZGF5c0luTW9udGggPSAobW9udGgpID0+IHtcclxuICByZXR1cm4gbmV3IERhdGUoMjAyMCwgbW9udGggKyAxLCAwKS5nZXREYXRlKClcclxufVxyXG5jb25zdCBtb250aE5hbWUgPSAobW9udGgpID0+e1xyXG4gIHN3aXRjaCAobW9udGgpIHtcclxuICAgIGNhc2UgMDpcclxuICAgICAgcmV0dXJuICdKYW51YXJ5JztcclxuICAgICAgYnJlYWs7XHJcbiAgICBcclxuICAgIGNhc2UgMTpcclxuICAgICAgcmV0dXJuICdGZWJydWFyeSc7XHJcbiAgICAgIGJyZWFrO1xyXG4gICAgY2FzZSAyOlxyXG4gICAgICByZXR1cm4gJ01hcmNoJztcclxuICAgICAgYnJlYWs7XHJcbiAgICBjYXNlIDM6XHJcbiAgICAgIHJldHVybiAnQXByaWwnO1xyXG4gICAgICBicmVhaztcclxuICAgIGNhc2UgNDpcclxuICAgICAgcmV0dXJuICdNYXknO1xyXG4gICAgICBicmVhaztcclxuICAgIGNhc2UgNTpcclxuICAgICAgcmV0dXJuICdKdW5lJztcclxuICAgICAgYnJlYWs7XHJcbiAgICBjYXNlIDY6XHJcbiAgICAgIHJldHVybiAnSnVseSc7XHJcbiAgICAgIGJyZWFrO1xyXG4gICAgY2FzZSA3OlxyXG4gICAgICByZXR1cm4gJ0F1Z3VzdCc7XHJcbiAgICAgIGJyZWFrO1xyXG4gICAgY2FzZSA4OlxyXG4gICAgICByZXR1cm4gJ1NlcHRlbWJlcic7XHJcbiAgICAgIGJyZWFrO1xyXG4gICAgY2FzZSA5OlxyXG4gICAgICByZXR1cm4gJ09jdG9iZXInO1xyXG4gICAgICBicmVhaztcclxuICAgIGNhc2UgMTA6XHJcbiAgICAgIHJldHVybiAnTm92ZW1iZXInO1xyXG4gICAgICBicmVhaztcclxuICAgIGNhc2UgMTE6XHJcbiAgICAgIHJldHVybiAnRGVjZW1iZXInO1xyXG4gICAgICBicmVhaztcclxuICAgIFxyXG4gIH1cclxufVxyXG5cclxuY29uc3QgZGF5T2ZXZWVrQ29udmVydCA9IChkYXkpPT57XHJcbiAgaWYoZGF5PT09IDApe1xyXG4gICAgZGF5PTY7XHJcbiAgICByZXR1cm4gZGF5O1xyXG4gIH1cclxuICBlbHNle3JldHVybiBkYXktMX1cclxufVxyXG5cclxuY29uc3QgYWRkVHJhbnNmZXIgPSAoYW1vdW50LCBiYW5rLCBjYXRlZ29yeSwgZGF0ZSwgc3RhdHVzLCB0aXRsZSk9PntcclxuICBjb25zdCBkYXlEaWZmZXJlbmNlID0gZGF0ZUZucy5kaWZmZXJlbmNlSW5EYXlzKG5ldyBEYXRlKGRhdGUpLCBuZXcgRGF0ZSgpKTtcclxuXHJcbiAgaWYgKHN0YXR1cyA9PT0gXCJkb25lXCIpIHtcclxuICAgIGNvbnN0IGh0bWwgPSBgXHJcbiAgICA8ZGl2IGNsYXNzPVwic3RyaXBfX2RvbmVcIj4ke2RhdGUudG9JU09TdHJpbmcoKS5zbGljZSgwLDEwKX08L2Rpdj5cclxuICAgIDxkaXYgY2xhc3M9XCJsb2dvV3JhcGVyXCI+XHJcbiAgICAgIDxkaXYgY2xhc3M9XCJjYXRlZ29yeVwiPiR7Y2F0ZWdvcnl9PC9kaXY+XHJcbiAgICA8L2Rpdj5cclxuICAgIDxkaXYgY2xhc3M9XCJ0aW1lTGVmdCB0aW1lTGVmdERvbmVcIj48L2Rpdj4gXHJcbiAgICA8ZGl2IGNsYXNzPVwiY29udGFpbmVyX19iYXIgY29udGFpbmVyX19iYXItLWhpZGVcIj5cclxuICAgICAgICA8ZGl2IGNsYXNzPVwiYW1vdW50XCI+JHthbW91bnR9IHrFgjwvZGl2PiBcclxuICAgICAgICA8cCBjbGFzcz1cInRpdGxlXCI+JHt0aXRsZX08L3A+XHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjb250YWluZXJCYXJfX2ljb25zIGNvbnRhaW5lckJhcl9faWNvbnMtLWRvbmVcIj5cclxuICAgICAgICAgICAgPGkgY2xhc3M9XCJpY29uX19kZWxldGUgZmFyIGZhLXRyYXNoLWFsdFwiPjwvaT5cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICA8aSBjbGFzcz1cImFycm93IGZhcyBmYS1jaGV2cm9uLWRvd25cIj48L2k+XHJcbiAgPC9kaXY+YDtcclxuICAgIHJldHVybiBodG1sO1xyXG4gIH0gZWxzZSB7XHJcbiAgICBjb25zdCBodG1sID0gYFxyXG4gICAgPGRpdiBjbGFzcz1cInN0cmlwX18ke2Jhbmt9XCI+JHtkYXRlLnRvSVNPU3RyaW5nKCkuc2xpY2UoMCwxMCl9PC9kaXY+XHJcbiAgICA8ZGl2IGNsYXNzPVwibG9nb1dyYXBlclwiPlxyXG4gICAgICA8aW1nIGNsYXNzPVwiaW1hZ2VcIiBzcmM9XCJhc3NldHMvaW1nLyR7YmFua30gMzB4MzAucG5nXCI+XHJcbiAgICAgIDxkaXYgY2xhc3M9XCJjYXRlZ29yeVwiPiR7Y2F0ZWdvcnl9PC9kaXY+XHJcbiAgICAgIDxkaXYgY2xhc3M9XCJzdGF0dXNDaXJjbGUgJHtzdGF0dXNDaXJjbGUoZGF5RGlmZmVyZW5jZSl9XCI+PC9kaXY+XHJcbiAgICA8L2Rpdj5cclxuICAgIDxkaXYgY2xhc3M9XCJ0aW1lTGVmdFwiPiR7ZGF0ZUZucy5kaWZmZXJlbmNlSW5EYXlzKFxyXG4gICAgICBuZXcgRGF0ZShkYXRlKSxcclxuICAgICAgbmV3IERhdGUoKVxyXG4gICAgKX0gZC48L2Rpdj4gXHJcbiAgICA8ZGl2IGNsYXNzPVwiY29udGFpbmVyX19iYXIgY29udGFpbmVyX19iYXItLWhpZGVcIj5cclxuICAgICAgICA8ZGl2IGNsYXNzPVwiYW1vdW50XCI+JHthbW91bnR9IHrFgjwvZGl2PiBcclxuICAgICAgICA8cCBjbGFzcz1cInRpdGxlXCI+JHt0aXRsZX08L3A+XHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjb250YWluZXJCYXJfX2ljb25zXCI+XHJcbiAgICAgICAgICAgIDxpIGNsYXNzPVwiaWNvbl9fY2hlY2tlZCBmYXIgZmEtY2hlY2stc3F1YXJlXCI+PC9pPlxyXG4gICAgICAgICAgICA8aSBjbGFzcz1cImljb25fX2VkaXQgZmFyIGZhLWVkaXRcIj48L2k+XHJcbiAgICAgICAgICAgIDxpIGNsYXNzPVwiaWNvbl9fZGVsZXRlIGZhciBmYS10cmFzaC1hbHRcIj48L2k+XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgPGkgY2xhc3M9XCJhcnJvdyBmYXMgZmEtY2hldnJvbi1kb3duXCI+PC9pPlxyXG4gICAgPC9kaXY+YDtcclxuICAgIHJldHVybiBodG1sO1xyXG4gIH1cclxuICBcclxufVxyXG5jb25zdCBjYWxlbmRhclJlc2V0ID0gKCk9PntcclxuICBjb25zdCBjYWxlbmRhciA9IGNhbGVuZGFyV3JhcGVyLnF1ZXJ5U2VsZWN0b3JBbGwoJy5kYXk6bm90KC5kYXktLWVtcHR5KScpO1xyXG4gIFxyXG4gIGNhbGVuZGFyLmZvckVhY2goZT0+e1xyXG4gICAgZS5pbm5lckhUTUwgPSBudWxsO1xyXG4gICAgZS5jbGFzc0xpc3QuYWRkKCdkYXktLWVtcHR5Jyk7XHJcbiAgfSlcclxufVxyXG5jb25zdCBkZWxldGVUcmFuc2ZlciA9IChpZCk9PntcclxuXHJcbiAgY29uc3QgY29udGFpbmVycyA9ICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuY29udGFpbmVyJyk7XHJcbiAgY29udGFpbmVycy5mb3JFYWNoKGU9PnsgXHJcbiAgICBpZihlLmdldEF0dHJpYnV0ZSgnZGF0YS1pZCcpID09PSBpZCl7XHJcbiAgICAgIGRiLmNvbGxlY3Rpb24oJ2JhbmtUcmFuc2ZlcnMnKS5kb2MoaWQpLmRlbGV0ZSgpXHJcbiAgICAgIC50aGVuKGNvbnNvbGUubG9nKCd0cmFuc2ZlciBkZWxldGVkIGZyb20gZmlyZWJhc2UnKSlcclxuICAgICAgLmNhdGNoKGVyciA9PiBjb25zb2xlLmxvZyhlcnIpKVxyXG4gICAgfVxyXG5cclxufSlcclxuXHJcbn1cclxuXHJcbmNvbnN0IHByaW50Q2FsZW5kYXIgPSAodG9kYXkpID0+e1xyXG5cclxuICBjb25zdCBsaXN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmNvbnRhaW5lcjpub3QoLmNvbnRhaW5lcl9fZG9uZSknKTtcclxuICBjb25zdCBmaXJzdERheU9mTW9udGggPSBkYXlPZldlZWtDb252ZXJ0KGRhdGVGbnMuc3RhcnRPZk1vbnRoKHRvZGF5KS5nZXREYXkoKSk7XHJcbiAgY29uc3QgbW9udGggPSBtb250aE5hbWUodG9kYXkuZ2V0TW9udGgoKSk7XHJcbiAgbGV0IG1vbnRoTnVtYmVyID0gKHRvZGF5LmdldE1vbnRoKCkrMSkudG9TdHJpbmcoKTtcclxuICBsZXQgeWVhciA9IHRvZGF5LmdldEZ1bGxZZWFyKCkudG9TdHJpbmcoKTtcclxuICBjb25zdCBtb250aEhlYWRlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tb250aE5hbWVfX2hlYWRlcicpO1xyXG4gIGNvbnN0IHllYXJIZWFkZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgneWVhcl9faGVhZGVyJyk7XHJcbiAgbW9udGhIZWFkZXIuaW5uZXJUZXh0ID0gbW9udGg7XHJcbiAgeWVhckhlYWRlci5pbm5lclRleHQgPSB5ZWFyO1xyXG4gIGNvbnN0IGRheXNJbk1vbnRoID0gZGF0ZUZucy5nZXREYXlzSW5Nb250aCh0b2RheSk7XHJcbiAgY29uc3QgbGFzdERheUluQXJyYXkgPSBkYXlzSW5Nb250aCArIGZpcnN0RGF5T2ZNb250aC0xO1xyXG4gIGNvbnN0IGRheXNJbkNhbGVuZGFyID0gY2FsZW5kYXJXcmFwZXIucXVlcnlTZWxlY3RvckFsbCgnLmRheScpO1xyXG4gIGxldCBkYXlJbkFycmF5ID0gbmV3IERhdGUoYCR7eWVhcn0tJHttb250aE51bWJlcn0tMWApO1xyXG5cclxuICBmb3IobGV0IGkgPSBmaXJzdERheU9mTW9udGg7IGk8PWxhc3REYXlJbkFycmF5OyBpKyspe1xyXG5cclxuICAgIGRheXNJbkNhbGVuZGFyW2ldLmNsYXNzTGlzdC5yZW1vdmUoJ2RheS0tZW1wdHknKTtcclxuICAgIGRheXNJbkNhbGVuZGFyW2ldLmlubmVySFRNTCA9IGA8cCBjbGFzcz1cImRheUluTW9udGhcIj4ke2RheUluQXJyYXkuZ2V0RGF0ZSgpfSAke2RheUluQXJyYXkudG9TdHJpbmcoKS5zbGljZSgwLDMpfTwvcD5gXHJcbiAgICBkYXlJbkFycmF5ID0gZGF0ZUZucy5hZGREYXlzKGRheUluQXJyYXksMSk7XHJcbiAgfVxyXG5cclxuICBsaXN0LmZvckVhY2goZT0+e1xyXG4gICAgXHJcbiAgICBjb25zdCBjYXRlZ29yeSA9IGUuY2hpbGRyZW4uaXRlbSgxKS5jaGlsZHJlbi5pdGVtKDEpLmlubmVyVGV4dDtcclxuICAgIGNvbnN0IHRyYW5zZmVyRGF5ID0gZGF0ZUZucy5nZXREYXRlKG5ldyBEYXRlKGUuY2hpbGRyZW4uaXRlbSgwKS5pbm5lclRleHQpKTtcclxuICAgIGNvbnN0IHRyYW5zZmVyTW9udGggPSBkYXRlRm5zLmdldE1vbnRoKG5ldyBEYXRlKGUuY2hpbGRyZW4uaXRlbSgwKS5pbm5lclRleHQpKSsxO1xyXG4gICAgXHJcbiAgICBpZih0cmFuc2Zlck1vbnRoID09PSArbW9udGhOdW1iZXIpe1xyXG4gICAgICBjb25zdCBjYWxlbmRhckluUG9zaXRpb24gPSAodHJhbnNmZXJEYXkrZmlyc3REYXlPZk1vbnRoKS0xO1xyXG4gICAgICBkYXlzSW5DYWxlbmRhcltjYWxlbmRhckluUG9zaXRpb25dLmlubmVySFRNTCArPSBgPHAgY2xhc3M9XCJkYXlfX2NhdGVnb3J5XCI+JHtjYXRlZ29yeX08L3A+YFxyXG4gICAgICBcclxuICAgIH1cclxuICB9KVxyXG5cclxufVxyXG4vL3dhdGNoIGZvciBsb2dpbiBvciBsb2dvdXQgXHJcbmF1dGgub25BdXRoU3RhdGVDaGFuZ2VkKHVzZXI9PntcclxuLy93aGVuIHVzZXIgaXMgbG9nZ2VkIGluXHJcbiAgaWYgKHVzZXIpe1xyXG4gICAgbG9nZ2VkX19vdXQuc3R5bGUuZGlzcGxheT0nbm9uZSc7XHJcbiAgICBjb25zdCBpbmZvID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgncCcpO1xyXG4gICAgaW5mby5zZXRBdHRyaWJ1dGUoJ2NsYXNzJywnbG9naW5fX2luZm8nKVxyXG4gICAgaW5mby5pbm5lclRleHQgPSBgWW91ciBsb2dpbiBhczogJHt1c2VyLmVtYWlsfWBcclxuICAgIHVzZXJfX3BhbmVsLnByZXBlbmQoaW5mbyk7XHJcbiAgICBmb3JtX191c2VyLnVzZXJfX2VtYWlsLnN0eWxlLmRpc3BsYXk9J25vbmUnO1xyXG4gICAgZm9ybV9fdXNlci51c2VyX19wYXNzd29yZC5zdHlsZS5kaXNwbGF5PSdub25lJztcclxuICAgIGZvcm1fX3VzZXIudXNlcl9fbG9naW4uc3R5bGUuZGlzcGxheT0nbm9uZSc7XHJcbiAgICBmb3JtX191c2VyLnVzZXJfX2xvZ291dC5zdHlsZS5kaXNwbGF5PSdibG9jayc7XHJcbiAgICB1c2VyX19idXR0b24uc3R5bGUuY29sb3IgPSAnZ3JlZW4nO1xyXG4vL3JlYWwtdGltZSBhZGRpbmcgaXRlbXMgdG8gbGlzdFxyXG4gICAgZGIuY29sbGVjdGlvbignYmFua1RyYW5zZmVycycpLm9yZGVyQnkoXCJkYXRlXCIpLm9uU25hcHNob3Qoc25hcHNob3Q9PntcclxuICAgICAgc25hcHNob3QuZG9jQ2hhbmdlcygpLmZvckVhY2goZT0+e1xyXG4gICAgICAgIGNvbnN0IGRvYyA9IGUuZG9jO1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCdkb2MuaWQnLCBkb2MuaWQpOyAgICBcclxuICAgICAgICAgIGlmKGUudHlwZSA9PT0gJ2FkZGVkJyl7XHJcbiAgICAgICAgICAgIGxldCBkYXRhID0gZG9jLmRhdGEoKTtcclxuICAgICAgICAgICAgbGV0IGZiRGF0ZSA9IGRhdGEuZGF0ZTtcclxuICAgICAgICAgICAgZGF0YS5kYXRlID0gZmJEYXRlLnRvRGF0ZSgpO1xyXG4gICAgICAgICAgICBkYXRhLmRhdGFJZCA9IGRvYy5pZDtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgY29uc3QgbGkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsaScpO1xyXG4gICAgICAgICAgICAgIGxpLnNldEF0dHJpYnV0ZSgnZGF0YS1pZCcsIGRvYy5pZCk7XHJcbiAgICAgICAgICAgICAgbGkuc2V0QXR0cmlidXRlKCd0cmFuc0RhdGUtaWQnLCBuZXcgRGF0ZShkYXRhLmRhdGUpKTtcclxuICAgICAgICAgICAgICBsaS5zZXRBdHRyaWJ1dGUoJ2NsYXNzJywgJ2NvbnRhaW5lcicpO1xyXG4gICAgICAgICAgICAgIGNvbnN0IGRheURpZmZlcmVuY2UgPSBkYXRlRm5zLmRpZmZlcmVuY2VJbkRheXMobmV3IERhdGUoZGF0YS5kYXRlKSwgbmV3IERhdGUoKSk7XHJcbiAgICAgICAgICAgICAgY29uc3Qge2Ftb3VudCwgYmFuaywgY2F0ZWdvcnksIGRhdGUsIHN0YXR1cywgdGl0bGV9ID0gZGF0YTtcclxuICAgICAgICAgIGlmKHN0YXR1cyA9PT0gJ2RvbmUnKXtcclxuICAgICAgICAgICAgbGkuY2xhc3NMaXN0LmFkZCgnY29udGFpbmVyX19kb25lJywgJ2NvbnRhaW5lcl9fZG9uZS0taGlkZScpXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgbGkuaW5uZXJIVE1MID0gYWRkVHJhbnNmZXIoYW1vdW50LCBiYW5rLCBjYXRlZ29yeSwgZGF0ZSwgc3RhdHVzLCB0aXRsZSk7XHJcbiAgICAgICAgdWwuYXBwZW5kKGxpKTtcclxuICAgICAgICBcclxuICAgICAgICBcclxuICAgICAgICBcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYoZS50eXBlID09PSAnbW9kaWZpZWQnKXtcclxuICAgICAgICBjb25zdCBsaSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xpJyk7XHJcbiAgICAgICAgbGkuc2V0QXR0cmlidXRlKCdkYXRhLWlkJywgZG9jLmlkKTtcclxuICAgICAgICBsaS5zZXRBdHRyaWJ1dGUoJ2NsYXNzJywgJ2NvbnRhaW5lcicpO1xyXG4gICAgICAgIGxpLmNsYXNzTGlzdC5hZGQoJ2NvbnRhaW5lcl9fZG9uZScpO1xyXG4gICAgICAgIGNvbnN0IGRhdGEgPSBkb2MuZGF0YSgpO1xyXG4gICAgICAgIGNvbnN0IGRheURpZmZlcmVuY2UgPSBkYXRlRm5zLmRpZmZlcmVuY2VJbkRheXMobmV3IERhdGUoZGF0YS5kYXRlKSwgbmV3IERhdGUoKSk7XHJcbiAgICAgICAgY29uc3Qge2Ftb3VudCwgYmFuaywgY2F0ZWdvcnksIGRhdGUsIHN0YXR1cywgdGl0bGV9ID0gZGF0YTtcclxuICAgICAgICBcclxuICAgICAgICBsaS5pbm5lckhUTUwgPSBhZGRUcmFuc2ZlcihhbW91bnQsIGJhbmssIGNhdGVnb3J5LCBkYXRlLCBzdGF0dXMsIHRpdGxlKTsgXHJcbiAgICAgICAgdWwuYXBwZW5kKGxpKTtcclxuICAgICAgICBcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgXHJcbiAgICAgIH0pXHJcbiAgICAgIC8vIGdldHRpbmcgdHJhbnNmZXJzIGxpc3Qgc29ydCBhbmQgZGlzcGxheSBhZ2FpblxyXG4gICAgICBsZXQgbGlzdCA9IHVsLnF1ZXJ5U2VsZWN0b3JBbGwoJy5jb250YWluZXInKTtcclxuICAgICAgICBsZXQgYXJyID0gWy4uLmxpc3RdO1xyXG4gICAgICAgIHVsLmlubmVySFRNTCA9IG51bGw7XHJcbiAgICAgICAgYXJyLnNvcnQoKGEsYik9PntcclxuICAgICAgICAgIGEgPSBuZXcgRGF0ZShhLmdldEF0dHJpYnV0ZSgndHJhbnNkYXRlLWlkJykpO1xyXG4gICAgICAgICAgYiA9IG5ldyBEYXRlKGIuZ2V0QXR0cmlidXRlKCd0cmFuc2RhdGUtaWQnKSk7ICBcclxuICAgICAgICAgIHJldHVybiBhLWI7XHJcbiAgICAgICAgICB9KVxyXG4gICAgICAgIGFyci5mb3JFYWNoKGU9PnVsLmFwcGVuZChlKSlcclxuICAgICAgICBjb25zb2xlLmxvZyhcImFyclwiLCBhcnIpO1xyXG4gICAgICBjb25zb2xlLmxvZygnb25zbmFwc2hvdCcpO1xyXG4gICAgfSlcclxuICAgIFxyXG4gICAgXHJcbiAgfVxyXG4gIC8vIHdoZW4gdXNlciBpcyBub3QgbG9nZ2VkIGluXHJcbiAgZWxzZXtcclxuICAgIGNvbnN0IGluZm8gPSB1c2VyX19wYW5lbC5xdWVyeVNlbGVjdG9yKCcubG9naW5fX2luZm8nKTtcclxuICAgIGlmKGluZm8pe2luZm8ucmVtb3ZlKCl9O1xyXG4gICAgZm9ybV9fdXNlci51c2VyX19lbWFpbC5zdHlsZS5kaXNwbGF5PSdibG9jayc7XHJcbiAgICBmb3JtX191c2VyLnVzZXJfX3Bhc3N3b3JkLnN0eWxlLmRpc3BsYXk9J2Jsb2NrJztcclxuICAgIGZvcm1fX3VzZXIudXNlcl9fbG9naW4uc3R5bGUuZGlzcGxheT0naW5saW5lJztcclxuICAgIGZvcm1fX3VzZXIudXNlcl9fbG9nb3V0LnN0eWxlLmRpc3BsYXk9J25vbmUnO1xyXG4gICAgY29uc29sZS5sb2coJ3VzZXIgbG9nZ2VkIG91dCcpO1xyXG4gICAgdXNlcl9fYnV0dG9uLnN0eWxlLmNvbG9yID0gJ2JsYWNrJztcclxuICAgIGxvZ2dlZF9fb3V0LnN0eWxlLmRpc3BsYXk9J2Jsb2NrJztcclxuICB9XHJcbn0pXHJcblxyXG4vL2xvZyB1c2VyIGluIFxyXG5mb3JtX191c2VyLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsZT0+e1xyXG4gIGUucHJldmVudERlZmF1bHQoKTtcclxuICBjb25zdCBlbWFpbCA9IGZvcm1fX3VzZXIudXNlcl9fZW1haWwudmFsdWU7XHJcbiAgY29uc3QgcGFzc3dvcmQgPSBmb3JtX191c2VyLnVzZXJfX3Bhc3N3b3JkLnZhbHVlO1xyXG4gIFxyXG4gIGF1dGguc2lnbkluV2l0aEVtYWlsQW5kUGFzc3dvcmQoZW1haWwsIHBhc3N3b3JkKVxyXG4gIC50aGVuKGZvcm1fX3VzZXIucmVzZXQoKSlcclxuICBcclxuICB1c2VyX19wYW5lbC5jbGFzc0xpc3QudG9nZ2xlKCd1c2VyX19wYW5lbC0tc2hvdycpO1xyXG4gIFxyXG59KVxyXG4vL2xvZyBvdXQgdXNlclxyXG51c2VyX19sb2dvdXQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBlPT57XHJcbiAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gIHVzZXJfX3BhbmVsLmNsYXNzTGlzdC50b2dnbGUoJ3VzZXJfX3BhbmVsLS1zaG93JylcclxuICBhdXRoLnNpZ25PdXQoKTtcclxuICBjb25zdCBjb250YWluZXJzID0gdWwucXVlcnlTZWxlY3RvckFsbCgnLmNvbnRhaW5lcicpO1xyXG4gIGNvbnRhaW5lcnMuZm9yRWFjaChlPT57XHJcbiAgICBlLnJlbW92ZSgpO1xyXG4gIH0pXHJcbiAgXHJcbn0pXHJcbiAvLyBzaG93IGhpZGUgdXNlciBwYW5lbFxyXG51c2VyX19idXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBlPT57XHJcbiAgICB1c2VyX19wYW5lbC5jbGFzc0xpc3QudG9nZ2xlKCd1c2VyX19wYW5lbC0tc2hvdycpO1xyXG59KVxyXG4vL2dldCBkYXRhIGZyb20gZmlyZWJhc2VcclxuLy8gZGIuY29sbGVjdGlvbignYmFua1RyYW5zZmVycycpLm9yZGVyQnkoXCJkYXRlXCIpLmdldCgpXHJcbi8vIC50aGVuKHNuYXBzaG90PT57XHJcbi8vICAgc25hcHNob3QuZG9jcy5mb3JFYWNoKGU9PntcclxuLy8gICAgIGNvbnN0IGRhdGEgPSBlLmRhdGEoKTtcclxuLy8gICAgIGNvbnNvbGUubG9nKGRhdGEuZGF0ZS50b0RhdGUoKSk7XHJcbi8vICAgICBjb25zb2xlLmxvZyhlLmRhdGEoKSk7XHJcbi8vICAgfSlcclxuLy8gfSlcclxuXHJcblxyXG5cclxuYmFja0Fycm93LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZT0+e1xyXG4gIGFkZF9fdHJhbnNmZXIuY2xhc3NMaXN0LnJlbW92ZSgnYWRkX190cmFuc2Zlci0tc2hvdycpXHJcbn0pXHJcblxyXG51bC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZSA9PiB7XHJcbiAgaWYgKGUudGFyZ2V0LnRhZ05hbWUgPT09IFwiSVwiICYmIGUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcImFycm93XCIpKSB7XHJcbiAgICBlLnRhcmdldC5wYXJlbnRFbGVtZW50LmNoaWxkcmVuXHJcbiAgICAgIC5pdGVtKDMpXHJcbiAgICAgIC5jbGFzc0xpc3QudG9nZ2xlKFwiY29udGFpbmVyX19iYXItLWhpZGVcIik7XHJcbiAgICBlLnRhcmdldC5wYXJlbnRFbGVtZW50LmNoaWxkcmVuLml0ZW0oNCkuY2xhc3NMaXN0LnRvZ2dsZShcImZhLXJvdGF0ZS0xODBcIik7XHJcbiAgfVxyXG4gIGlmIChlLnRhcmdldC50YWdOYW1lID09PSBcIklcIiAmJiBlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJpY29uX19kZWxldGVcIikpIHtcclxuICAgIGxldCBpZCA9IGUudGFyZ2V0LnBhcmVudEVsZW1lbnQucGFyZW50RWxlbWVudC5wYXJlbnRFbGVtZW50LmdldEF0dHJpYnV0ZShcclxuICAgICAgXCJkYXRhLWlkXCJcclxuICAgICk7XHJcbiAgICBjb25zdCBjb250YWluZXJzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5jb250YWluZXJcIik7XHJcbiAgICBjb250YWluZXJzLmZvckVhY2goZSA9PiB7XHJcbiAgICAgIGlmIChlLmdldEF0dHJpYnV0ZShcImRhdGEtaWRcIikgPT09IGlkKSB7XHJcbiAgICAgICAgZGIuY29sbGVjdGlvbihcImJhbmtUcmFuc2ZlcnNcIilcclxuICAgICAgICAgIC5kb2MoaWQpXHJcbiAgICAgICAgICAuZGVsZXRlKClcclxuICAgICAgICAgIC50aGVuKGNvbnNvbGUubG9nKFwidHJhbnNmZXIgZGVsZXRlZCBmcm9tIGZpcmViYXNlXCIpKVxyXG4gICAgICAgICAgLmNhdGNoKGVyciA9PiBjb25zb2xlLmxvZyhlcnIpKTtcclxuICAgICAgICBlLnJlbW92ZSgpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9XHJcbiAgaWYoZS50YXJnZXQudGFnTmFtZSA9PT0gXCJJXCIgJiYgZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdpY29uX19jaGVja2VkJykpe1xyXG4gICAgY29uc29sZS5sb2coZS50YXJnZXQucGFyZW50RWxlbWVudC5wYXJlbnRFbGVtZW50LnBhcmVudEVsZW1lbnQpO1xyXG4gICAgY29uc3QgaWQgPSBlLnRhcmdldC5wYXJlbnRFbGVtZW50LnBhcmVudEVsZW1lbnQucGFyZW50RWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2RhdGEtaWQnKVxyXG4gICAgY29uc29sZS5sb2coXCJUQ0w6IGUudGFyZ2V0LnBhcmVudEVsZW1lbnQucGFyZW50RWxlbWVudC5wYXJlbnRFbGVtZW50XCIsIGUudGFyZ2V0LnBhcmVudEVsZW1lbnQucGFyZW50RWxlbWVudC5wYXJlbnRFbGVtZW50KVxyXG4gICAgY29uc29sZS5sb2coaWQpO1xyXG4gICAgZGIuY29sbGVjdGlvbignYmFua1RyYW5zZmVycycpLmRvYyhpZCkudXBkYXRlKHtzdGF0dXM6ICdkb25lJ30pXHJcbiAgICAudGhlbihjb25zb2xlLmxvZyhcInRyYW5zZmVyIGVkaXRlZCBpbiBmaXJlYmFzZVwiKSlcclxuICAgIC5jYXRjaChlcnIgPT4gY29uc29sZS5sb2coZXJyKSk7XHJcbiAgICBlLnRhcmdldC5wYXJlbnRFbGVtZW50LnBhcmVudEVsZW1lbnQucGFyZW50RWxlbWVudC5yZW1vdmUoKTtcclxuICB9XHJcbn0pO1xyXG5cclxuYWRkQnV0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBlPT57XHJcbiAgYWRkX190cmFuc2Zlci5jbGFzc0xpc3QudG9nZ2xlKCdhZGRfX3RyYW5zZmVyLS1zaG93Jyk7XHJcbiAgLy8gcHV0dGluZyBjdXJlbnQgZGF0ZSBpbiBkYXRlIGlucHV0XHJcbiAgY29uc3QgZGF0ZVBpY2tlciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjYWxlbmRhcicpO1xyXG4gIGRhdGVQaWNrZXIudmFsdWVBc0RhdGUgPSBuZXcgRGF0ZSgpO1xyXG59KVxyXG4vLyBDYWxlbmRhciB2aWV3IG9wZW5cclxuY2FsZW5kYXJCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBlPT4ge1xyXG4gIGNhbGVuZGFyUG9wdXAuY2xhc3NMaXN0LnRvZ2dsZSgnY2FsZW5kYXJfX3BvcHVwLS1zaG93Jyk7XHJcbiAgbGV0IHRvZGF5ID0gbmV3IERhdGUoKTtcclxuICBwcmludENhbGVuZGFyKHRvZGF5KTtcclxuLy8gbWFya2luZyB0b2RheSBkYXlcclxuY29uc3QgZGF5cyA9IGNhbGVuZGFyV3JhcGVyLnF1ZXJ5U2VsZWN0b3JBbGwoJy5kYXknKTtcclxuICBkYXlzLmZvckVhY2goZT0+e1xyXG4gICAgY29uc3QgZGF5ID0gZS5pbm5lclRleHQuc2xpY2UoMCwyKTtcclxuICAgIGlmKCtkYXkgPT09IHRvZGF5LmdldERhdGUoKSl7XHJcbiAgICAgIGNvbnNvbGUubG9nKCtkYXkpO1xyXG4gICAgICBlLnN0eWxlLmJvcmRlciA9ICdncmVlbiBzb2xpZCAycHgnO1xyXG4gICAgfVxyXG4gICAgLy8gY29uc29sZS5sb2coK2RheSlcclxuICAgIH0pXHJcbi8vICBtb250aCBhcnJvdyBsaXN0ZW5lclxyXG4gIG1vbnRoTmFtZV9fbmF2aWdhdGlvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGU9PntcclxuICAgIGlmKGUudGFyZ2V0LmdldEF0dHJpYnV0ZSgnaWQnKSA9PT0gJ25leHRNb250aCcpe1xyXG4gICAgICB0b2RheSA9IGRhdGVGbnMuYWRkTW9udGhzKHRvZGF5LCAxKTtcclxuICAgICAgY2FsZW5kYXJSZXNldCgpO1xyXG4gICAgICBwcmludENhbGVuZGFyKHRvZGF5KTtcclxuICAgIH1cclxuICAgIGlmKGUudGFyZ2V0LmdldEF0dHJpYnV0ZSgnaWQnKSA9PT0gJ3ByZXZNb250aCcpe1xyXG4gICAgICB0b2RheSA9IGRhdGVGbnMuc3ViTW9udGhzKHRvZGF5LCAxKTtcclxuICAgICAgY2FsZW5kYXJSZXNldCgpO1xyXG4gICAgICBwcmludENhbGVuZGFyKHRvZGF5KTtcclxuICAgIH1cclxufSlcclxuIFxyXG59KVxyXG5cclxuY2FsZW5kYXJCYWNrQXJyb3cuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBlPT57XHJcbiAgY2FsZW5kYXJQb3B1cC5jbGFzc0xpc3QudG9nZ2xlKCdjYWxlbmRhcl9fcG9wdXAtLXNob3cnKTtcclxuICBjYWxlbmRhclJlc2V0KCk7XHJcbn0pXHJcbnNob3dfX2RvbmUuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBlPT57XHJcbiAgIGNvbnN0IGNvbnRhaW5lcnMgPSB1bC5xdWVyeVNlbGVjdG9yQWxsKCcuY29udGFpbmVyX19kb25lJyk7XHJcbiAgIGNvbnRhaW5lcnMuZm9yRWFjaChlPT57XHJcbiAgICAgZS5jbGFzc0xpc3QudG9nZ2xlKCdjb250YWluZXJfX2RvbmUtLWhpZGUnKVxyXG4gICB9KVxyXG59KVxyXG4vLyBhZGQgbmV3IHRyYW5zZmVyIHRvIGZpcmViYXNlXHJcbnRyYW5zZmVyc19fc3VibWl0LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZT0+e1xyXG4gIGUucHJldmVudERlZmF1bHQoKTtcclxuICBjb25zdCBjYXRlZ29yeSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjYXRlZ29yeScpO1xyXG4gIGNvbnN0IGJhbmsgPSAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignaW5wdXRbbmFtZT1iYW5rXTpjaGVja2VkJykudmFsdWU7XHJcbiAgY29uc29sZS5sb2coXCJkYXRlIGZyb20gZm9ybVwiLHRyYW5zZmVycy5kYXRlLnZhbHVlQXNEYXRlKTtcclxuICBjb25zdCBiYW5rT2JqZWN0ID0gVHJhbnNmZXIocGFyc2VGbG9hdCh0cmFuc2ZlcnMuYW1vdW50LnZhbHVlKSwgYmFuaywgdHJhbnNmZXJzLmNhdGVnb3J5LnZhbHVlLCB0cmFuc2ZlcnMuZGF0ZS52YWx1ZUFzRGF0ZSwgJycsdHJhbnNmZXJzLnRpdGxlLnZhbHVlKTtcclxuICAgIFxyXG4gICAgZGIuY29sbGVjdGlvbignYmFua1RyYW5zZmVycycpLmFkZChiYW5rT2JqZWN0KS50aGVuKCgpPT57XHJcbiAgICAgIGNvbnNvbGUubG9nKCd0cmFuc2ZlciBhZGRlZCB0byBmaXJlYmFzZScpXHJcbiAgICB9KVxyXG4gICAgdHJhbnNmZXJzLnJlc2V0KCk7XHJcbiAgICBhZGRfX3RyYW5zZmVyLmNsYXNzTGlzdC50b2dnbGUoJ2FkZF9fdHJhbnNmZXItLXNob3cnKTtcclxufSlcclxuIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///0\n")},function(module,exports){eval("exports.endianness = function () { return 'LE' };\n\nexports.hostname = function () {\n    if (typeof location !== 'undefined') {\n        return location.hostname\n    }\n    else return '';\n};\n\nexports.loadavg = function () { return [] };\n\nexports.uptime = function () { return 0 };\n\nexports.freemem = function () {\n    return Number.MAX_VALUE;\n};\n\nexports.totalmem = function () {\n    return Number.MAX_VALUE;\n};\n\nexports.cpus = function () { return [] };\n\nexports.type = function () { return 'Browser' };\n\nexports.release = function () {\n    if (typeof navigator !== 'undefined') {\n        return navigator.appVersion;\n    }\n    return '';\n};\n\nexports.networkInterfaces\n= exports.getNetworkInterfaces\n= function () { return {} };\n\nexports.arch = function () { return 'javascript' };\n\nexports.platform = function () { return 'browser' };\n\nexports.tmpdir = exports.tmpDir = function () {\n    return '/tmp';\n};\n\nexports.EOL = '\\n';\n\nexports.homedir = function () {\n\treturn '/'\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvb3MtYnJvd3NlcmlmeS9icm93c2VyLmpzPzNjNDMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsa0NBQWtDOztBQUVsQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsK0JBQStCOztBQUUvQiw4QkFBOEI7O0FBRTlCO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUEsNEJBQTRCOztBQUU1Qiw0QkFBNEI7O0FBRTVCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsZUFBZSxVQUFVOztBQUV6Qiw0QkFBNEI7O0FBRTVCLGdDQUFnQzs7QUFFaEM7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQSIsImZpbGUiOiIxLmpzIiwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0cy5lbmRpYW5uZXNzID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gJ0xFJyB9O1xuXG5leHBvcnRzLmhvc3RuYW1lID0gZnVuY3Rpb24gKCkge1xuICAgIGlmICh0eXBlb2YgbG9jYXRpb24gIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHJldHVybiBsb2NhdGlvbi5ob3N0bmFtZVxuICAgIH1cbiAgICBlbHNlIHJldHVybiAnJztcbn07XG5cbmV4cG9ydHMubG9hZGF2ZyA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIFtdIH07XG5cbmV4cG9ydHMudXB0aW1lID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gMCB9O1xuXG5leHBvcnRzLmZyZWVtZW0gPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIE51bWJlci5NQVhfVkFMVUU7XG59O1xuXG5leHBvcnRzLnRvdGFsbWVtID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBOdW1iZXIuTUFYX1ZBTFVFO1xufTtcblxuZXhwb3J0cy5jcHVzID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gW10gfTtcblxuZXhwb3J0cy50eXBlID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gJ0Jyb3dzZXInIH07XG5cbmV4cG9ydHMucmVsZWFzZSA9IGZ1bmN0aW9uICgpIHtcbiAgICBpZiAodHlwZW9mIG5hdmlnYXRvciAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgcmV0dXJuIG5hdmlnYXRvci5hcHBWZXJzaW9uO1xuICAgIH1cbiAgICByZXR1cm4gJyc7XG59O1xuXG5leHBvcnRzLm5ldHdvcmtJbnRlcmZhY2VzXG49IGV4cG9ydHMuZ2V0TmV0d29ya0ludGVyZmFjZXNcbj0gZnVuY3Rpb24gKCkgeyByZXR1cm4ge30gfTtcblxuZXhwb3J0cy5hcmNoID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gJ2phdmFzY3JpcHQnIH07XG5cbmV4cG9ydHMucGxhdGZvcm0gPSBmdW5jdGlvbiAoKSB7IHJldHVybiAnYnJvd3NlcicgfTtcblxuZXhwb3J0cy50bXBkaXIgPSBleHBvcnRzLnRtcERpciA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gJy90bXAnO1xufTtcblxuZXhwb3J0cy5FT0wgPSAnXFxuJztcblxuZXhwb3J0cy5ob21lZGlyID0gZnVuY3Rpb24gKCkge1xuXHRyZXR1cm4gJy8nXG59O1xuIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///1\n")}]);